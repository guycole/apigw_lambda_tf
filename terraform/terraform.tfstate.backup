{
  "version": 4,
  "terraform_version": "0.12.6",
  "serial": 267,
  "lineage": "5aca7041-9ff7-3924-7ff3-0e062483a859",
  "outputs": {
    "invoke_url": {
      "value": "https://juln2hi6pk.execute-api.us-west-2.amazonaws.com/v01",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "swagger",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "419274e5fc3c802d56baacedc2d0563f8675261df3ebec09ab7f9fb2ff4a6c00",
            "rendered": "---\nswagger: \"2.0\"\ninfo:\n  description: Ping Demonstration\n  title: \"PingGateway\"\n  version: \"1\"\n\nbasePath: \"/v01\"\n\nschemes:\n- \"http\"\n\npaths:\n  /:\n    get:\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"text/html\"\n\n      responses:\n        200:\n          description: \"200 response\"\n          headers:\n            Content-Type:\n              type: \"string\"\n\n      x-amazon-apigateway-integration:\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Content-Type: \"'text/html'\"\n            responseTemplates:\n              text/html: \"\u003chtml\u003e\\n    \u003cbody\u003e\\n        \u003ch1\u003eresponseTemplate\u003c/h1\u003e\\n    \u003c/body\u003e\\n \u003c/html\u003e\"\n        requestTemplates:\n          application/json: \"{\\\"statusCode\\\": 200}\"\n        passthroughBehavior: \"when_no_match\"\n        type: \"mock\"\n\n  /ping:\n    post:\n      operationId: \"CreatePing\"\n\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"application/json\"\n\n      parameters:\n      - in: \"body\"\n        name: \"PingRequestV1\"\n        required: true\n        schema:\n          $ref: \"#/definitions/PingRequestV1\"\n\n      responses:\n        200:\n          description: \"200 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n          headers:\n            Access-Control-Allow-Origin:\n              type: \"string\"\n\n      x-amazon-apigateway-request-validator: \"ping validator\"\n\n      x-amazon-apigateway-integration:\n        uri: \"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:238461155224:function:ping_handler/invocations\"\n\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n\n        requestTemplates:\n          application/json: \"#set($inputRoot = $input.path('$'))\\n \\\n                {\\n  \\\"preamble\\\" : {\\n \\\n                       \\\"transactionUuid\\\" : \\\"foo\\\",\\n  \\\n                       \\\"messageVersion\\\" : 42,\\n \\\n                       \\\"messageType\\\" : \\\"foo\\\"\\n  },\\n \\\n                \\\"pingState\\\" : true\\n}\"\n\n        passthroughBehavior: \"never\"\n        httpMethod: \"POST\"\n        type: \"aws\"\n\n  ###########\n    get:\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"application/json\"\n      responses:\n        200:\n          description: \"200 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n        400:\n          description: \"400 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n      x-amazon-apigateway-integration:\n        uri: \"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:238461155224:function:ping_handler/invocations\"\n        requestTemplates:\n          application/json: \"{\\n  \\\"statusCode\\\": 200\\n}\\n\"\n        passthroughBehavior: \"when_no_match\"\n        httpMethod: \"POST\"\n        timeoutInMillis: 29000\n        type: \"aws_proxy\"\ndefinitions:\n  PingResponseV1:\n    type: \"object\"\n    required:\n    - \"pingState\"\n    - \"preamble\"\n    properties:\n      preamble:\n        type: \"object\"\n        properties:\n          transactionUuid:\n            type: \"string\"\n            format: \"uuid\"\n            description: \"client generated transaction UUID\"\n          messageVersion:\n            type: \"integer\"\n            description: \"message schema version\"\n          messageType:\n            type: \"string\"\n            description: \"message type, always PING\"\n        required:\n        - \"transactionUuid\"\n      pingState:\n        type: \"boolean\"\n    title: \"PingResponseV1\"\n\n  PingRequestV1:\n    type: \"object\"\n    required:\n    - \"pingState\"\n    - \"preamble\"\n    properties:\n      preamble:\n        type: \"object\"\n        properties:\n          transactionUuid:\n            type: \"string\"\n            format: \"uuid\"\n            description: \"client generated transaction UUID\"\n          messageVersion:\n            type: \"integer\"\n            description: \"defined by URL\"\n          messageType:\n            type: \"string\"\n            description: \"defined by URL\"\n        required:\n        - \"transactionUuid\"\n      pingState:\n        type: \"boolean\"\n    title: \"PingRequestV1\"\n\nx-amazon-apigateway-request-validators:\n  ping validator:\n    validateRequestParameters: true\n    validateRequestBody: true\n",
            "template": "---\nswagger: \"2.0\"\ninfo:\n  description: Ping Demonstration\n  title: \"PingGateway\"\n  version: \"1\"\n\nbasePath: \"/v01\"\n\nschemes:\n- \"http\"\n\npaths:\n  /:\n    get:\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"text/html\"\n\n      responses:\n        200:\n          description: \"200 response\"\n          headers:\n            Content-Type:\n              type: \"string\"\n\n      x-amazon-apigateway-integration:\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Content-Type: \"'text/html'\"\n            responseTemplates:\n              text/html: \"\u003chtml\u003e\\n    \u003cbody\u003e\\n        \u003ch1\u003eresponseTemplate\u003c/h1\u003e\\n    \u003c/body\u003e\\n \u003c/html\u003e\"\n        requestTemplates:\n          application/json: \"{\\\"statusCode\\\": 200}\"\n        passthroughBehavior: \"when_no_match\"\n        type: \"mock\"\n\n  /ping:\n    post:\n      operationId: \"CreatePing\"\n\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"application/json\"\n\n      parameters:\n      - in: \"body\"\n        name: \"PingRequestV1\"\n        required: true\n        schema:\n          $ref: \"#/definitions/PingRequestV1\"\n\n      responses:\n        200:\n          description: \"200 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n          headers:\n            Access-Control-Allow-Origin:\n              type: \"string\"\n\n      x-amazon-apigateway-request-validator: \"ping validator\"\n\n      x-amazon-apigateway-integration:\n        uri: \"${ping_lambda_arn}\"\n\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n\n        requestTemplates:\n          application/json: \"#set($inputRoot = $input.path('$'))\\n \\\n                {\\n  \\\"preamble\\\" : {\\n \\\n                       \\\"transactionUuid\\\" : \\\"foo\\\",\\n  \\\n                       \\\"messageVersion\\\" : 42,\\n \\\n                       \\\"messageType\\\" : \\\"foo\\\"\\n  },\\n \\\n                \\\"pingState\\\" : true\\n}\"\n\n        passthroughBehavior: \"never\"\n        httpMethod: \"POST\"\n        type: \"aws\"\n\n  ###########\n    get:\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"application/json\"\n      responses:\n        200:\n          description: \"200 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n        400:\n          description: \"400 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n      x-amazon-apigateway-integration:\n        uri: \"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:238461155224:function:ping_handler/invocations\"\n        requestTemplates:\n          application/json: \"{\\n  \\\"statusCode\\\": 200\\n}\\n\"\n        passthroughBehavior: \"when_no_match\"\n        httpMethod: \"POST\"\n        timeoutInMillis: 29000\n        type: \"aws_proxy\"\ndefinitions:\n  PingResponseV1:\n    type: \"object\"\n    required:\n    - \"pingState\"\n    - \"preamble\"\n    properties:\n      preamble:\n        type: \"object\"\n        properties:\n          transactionUuid:\n            type: \"string\"\n            format: \"uuid\"\n            description: \"client generated transaction UUID\"\n          messageVersion:\n            type: \"integer\"\n            description: \"message schema version\"\n          messageType:\n            type: \"string\"\n            description: \"message type, always PING\"\n        required:\n        - \"transactionUuid\"\n      pingState:\n        type: \"boolean\"\n    title: \"PingResponseV1\"\n\n  PingRequestV1:\n    type: \"object\"\n    required:\n    - \"pingState\"\n    - \"preamble\"\n    properties:\n      preamble:\n        type: \"object\"\n        properties:\n          transactionUuid:\n            type: \"string\"\n            format: \"uuid\"\n            description: \"client generated transaction UUID\"\n          messageVersion:\n            type: \"integer\"\n            description: \"defined by URL\"\n          messageType:\n            type: \"string\"\n            description: \"defined by URL\"\n        required:\n        - \"transactionUuid\"\n      pingState:\n        type: \"boolean\"\n    title: \"PingRequestV1\"\n\nx-amazon-apigateway-request-validators:\n  ping validator:\n    validateRequestParameters: true\n    validateRequestBody: true\n",
            "vars": {
              "ping_lambda_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:238461155224:function:ping_handler/invocations"
            }
          },
          "depends_on": [
            "aws_lambda_function.ping_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_deployment",
      "name": "gw_deploy",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_date": "2019-09-01T20:51:22Z",
            "description": "",
            "execution_arn": "arn:aws:execute-api:us-west-2:238461155224:juln2hi6pk/v01",
            "id": "ql0d9r",
            "invoke_url": "https://juln2hi6pk.execute-api.us-west-2.amazonaws.com/v01",
            "rest_api_id": "juln2hi6pk",
            "stage_description": null,
            "stage_name": "v01",
            "variables": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_rest_api.gw_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_rest_api",
      "name": "gw_api",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_source": "HEADER",
            "binary_media_types": null,
            "body": "---\nswagger: \"2.0\"\ninfo:\n  description: Ping Demonstration\n  title: \"PingGateway\"\n  version: \"1\"\n\nbasePath: \"/v01\"\n\nschemes:\n- \"http\"\n\npaths:\n  /:\n    get:\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"text/html\"\n\n      responses:\n        200:\n          description: \"200 response\"\n          headers:\n            Content-Type:\n              type: \"string\"\n\n      x-amazon-apigateway-integration:\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Content-Type: \"'text/html'\"\n            responseTemplates:\n              text/html: \"\u003chtml\u003e\\n    \u003cbody\u003e\\n        \u003ch1\u003eresponseTemplate\u003c/h1\u003e\\n    \u003c/body\u003e\\n \u003c/html\u003e\"\n        requestTemplates:\n          application/json: \"{\\\"statusCode\\\": 200}\"\n        passthroughBehavior: \"when_no_match\"\n        type: \"mock\"\n\n  /ping:\n    post:\n      operationId: \"CreatePing\"\n\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"application/json\"\n\n      parameters:\n      - in: \"body\"\n        name: \"PingRequestV1\"\n        required: true\n        schema:\n          $ref: \"#/definitions/PingRequestV1\"\n\n      responses:\n        200:\n          description: \"200 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n          headers:\n            Access-Control-Allow-Origin:\n              type: \"string\"\n\n      x-amazon-apigateway-request-validator: \"ping validator\"\n\n      x-amazon-apigateway-integration:\n        uri: \"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:238461155224:function:ping_handler/invocations\"\n\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n\n        requestTemplates:\n          application/json: \"#set($inputRoot = $input.path('$'))\\n \\\n                {\\n  \\\"preamble\\\" : {\\n \\\n                       \\\"transactionUuid\\\" : \\\"foo\\\",\\n  \\\n                       \\\"messageVersion\\\" : 42,\\n \\\n                       \\\"messageType\\\" : \\\"foo\\\"\\n  },\\n \\\n                \\\"pingState\\\" : true\\n}\"\n\n        passthroughBehavior: \"never\"\n        httpMethod: \"POST\"\n        type: \"aws\"\n\n  ###########\n    get:\n      consumes:\n      - \"application/json\"\n      produces:\n      - \"application/json\"\n      responses:\n        200:\n          description: \"200 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n        400:\n          description: \"400 response\"\n          schema:\n            $ref: \"#/definitions/PingResponseV1\"\n      x-amazon-apigateway-integration:\n        uri: \"arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:238461155224:function:ping_handler/invocations\"\n        requestTemplates:\n          application/json: \"{\\n  \\\"statusCode\\\": 200\\n}\\n\"\n        passthroughBehavior: \"when_no_match\"\n        httpMethod: \"POST\"\n        timeoutInMillis: 29000\n        type: \"aws_proxy\"\ndefinitions:\n  PingResponseV1:\n    type: \"object\"\n    required:\n    - \"pingState\"\n    - \"preamble\"\n    properties:\n      preamble:\n        type: \"object\"\n        properties:\n          transactionUuid:\n            type: \"string\"\n            format: \"uuid\"\n            description: \"client generated transaction UUID\"\n          messageVersion:\n            type: \"integer\"\n            description: \"message schema version\"\n          messageType:\n            type: \"string\"\n            description: \"message type, always PING\"\n        required:\n        - \"transactionUuid\"\n      pingState:\n        type: \"boolean\"\n    title: \"PingResponseV1\"\n\n  PingRequestV1:\n    type: \"object\"\n    required:\n    - \"pingState\"\n    - \"preamble\"\n    properties:\n      preamble:\n        type: \"object\"\n        properties:\n          transactionUuid:\n            type: \"string\"\n            format: \"uuid\"\n            description: \"client generated transaction UUID\"\n          messageVersion:\n            type: \"integer\"\n            description: \"defined by URL\"\n          messageType:\n            type: \"string\"\n            description: \"defined by URL\"\n        required:\n        - \"transactionUuid\"\n      pingState:\n        type: \"boolean\"\n    title: \"PingRequestV1\"\n\nx-amazon-apigateway-request-validators:\n  ping validator:\n    validateRequestParameters: true\n    validateRequestBody: true\n",
            "created_date": "2019-09-01T20:51:20Z",
            "description": "Ping Demonstration",
            "endpoint_configuration": [
              {
                "types": [
                  "REGIONAL"
                ]
              }
            ],
            "execution_arn": "arn:aws:execute-api:us-west-2:238461155224:juln2hi6pk",
            "id": "juln2hi6pk",
            "minimum_compression_size": -1,
            "name": "PingGateway",
            "policy": "",
            "root_resource_id": "8gka3yrikf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "data.template_file.swagger"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "ping_lambda_logging",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::238461155224:policy/ping_lambda_logging",
            "description": "ping lambda logging",
            "id": "arn:aws:iam::238461155224:policy/ping_lambda_logging",
            "name": "ping_lambda_logging",
            "name_prefix": null,
            "path": "/",
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"logs:CreateLogStream\",\n        \"logs:PutLogEvents\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\",\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ping_assumable_role",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::238461155224:role/ping-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2019-09-01T20:51:01Z",
            "description": "",
            "force_detach_policies": false,
            "id": "ping-role",
            "max_session_duration": 3600,
            "name": "ping-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": null,
            "unique_id": "AROATPBLEO6MIOV7G5OK7"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_logs",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ping-role-20190901205102728000000001",
            "policy_arn": "arn:aws:iam::238461155224:policy/ping_lambda_logging",
            "role": "ping-role"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_iam_policy.ping_lambda_logging",
            "aws_iam_role.ping_assumable_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "ping_lambda",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-west-2:238461155224:function:ping_handler",
            "dead_letter_config": [],
            "description": "ping message handler",
            "environment": [],
            "filename": null,
            "function_name": "ping_handler",
            "handler": "ping_v01.handler",
            "id": "ping_handler",
            "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:238461155224:function:ping_handler/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-09-01T20:51:19.815+0000",
            "layers": null,
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-west-2:238461155224:function:ping_handler:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::238461155224:role/ping-role",
            "runtime": "python3.7",
            "s3_bucket": "lambda.braingang.net",
            "s3_key": "ping-v01.zip",
            "s3_object_version": null,
            "source_code_hash": "GnO5M57RJZ8EEC/+ckyWvWQVmg5wlQMQihNkdVGebo0=",
            "source_code_size": 4156,
            "tags": null,
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.ping_assumable_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "cloudwatch_ping_lambda",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "ping_handler",
            "id": "bogus",
            "principal": "events.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": null,
            "statement_id": "bogus",
            "statement_id_prefix": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_lambda_function.ping_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "invoke_ping_lambda",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "ping_handler",
            "id": "AllowPingGatewayInvoke",
            "principal": "apigateway.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:us-west-2:238461155224:juln2hi6pk/*/*/*",
            "statement_id": "AllowPingGatewayInvoke",
            "statement_id_prefix": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_rest_api.gw_api",
            "aws_lambda_function.ping_lambda"
          ]
        }
      ]
    }
  ]
}
